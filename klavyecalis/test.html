<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test - Metin Yazma UygulamasÄ±</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        h2 { color: #666; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        button {
            background: #333;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #555; }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Metin Yazma UygulamasÄ± - Test SayfasÄ±</h1>

    <div class="test-section">
        <h2>1. Dosya YÃ¼kleme Testi</h2>
        <div id="file-test"></div>
        <button onclick="testFiles()">DosyalarÄ± Test Et</button>
    </div>

    <div class="test-section">
        <h2>2. TextComparator Testi</h2>
        <div id="comparator-test"></div>
        <button onclick="testComparator()">Comparator'Ä± Test Et</button>
    </div>

    <div class="test-section">
        <h2>3. Timer Testi</h2>
        <div id="timer-test"></div>
        <button onclick="testTimer()">Timer'Ä± Test Et</button>
    </div>

    <div class="test-section">
        <h2>4. MistakePool Testi</h2>
        <div id="pool-test"></div>
        <button onclick="testPool()">Pool'u Test Et</button>
    </div>

    <div class="test-section">
        <h2>5. UygulamayÄ± AÃ§</h2>
        <button onclick="window.open('index.html', '_blank')">UygulamayÄ± AÃ§</button>
    </div>

    <!-- DosyalarÄ± yÃ¼kle -->
    <script src="config.js"></script>
    <script src="missions_tr.js"></script>
    <script src="comparator.js"></script>
    <script src="mistakePool.js"></script>
    <script src="timer.js"></script>

    <script>
        function testFiles() {
            const output = document.getElementById('file-test');
            let html = '';

            // Config testi
            html += typeof CONFIG !== 'undefined' 
                ? '<div class="test-result success">âœ“ config.js yÃ¼klendi</div>'
                : '<div class="test-result error">âœ— config.js yÃ¼klenemedi</div>';

            // Missions testi
            html += typeof MISSIONS_TR !== 'undefined' 
                ? `<div class="test-result success">âœ“ missions_tr.js yÃ¼klendi (${MISSIONS_TR.length} metin)</div>`
                : '<div class="test-result error">âœ— missions_tr.js yÃ¼klenemedi</div>';

            // Comparator testi
            html += typeof TextComparator !== 'undefined' 
                ? '<div class="test-result success">âœ“ comparator.js yÃ¼klendi</div>'
                : '<div class="test-result error">âœ— comparator.js yÃ¼klenemedi</div>';

            // MistakePool testi
            html += typeof MistakePool !== 'undefined' 
                ? '<div class="test-result success">âœ“ mistakePool.js yÃ¼klendi</div>'
                : '<div class="test-result error">âœ— mistakePool.js yÃ¼klenemedi</div>';

            // Timer testi
            html += typeof Timer !== 'undefined' 
                ? '<div class="test-result success">âœ“ timer.js yÃ¼klendi</div>'
                : '<div class="test-result error">âœ— timer.js yÃ¼klenemedi</div>';

            output.innerHTML = html;
        }

        function testComparator() {
            const output = document.getElementById('comparator-test');

            try {
                const comparator = new TextComparator({ caseSensitive: false, ignorePunctuation: true });

                let html = '<div class="test-result success">âœ“ TextComparator Ã§alÄ±ÅŸÄ±yor</div>';

                // Test 1: Normal karÅŸÄ±laÅŸtÄ±rma
                html += '<h3>Test 1: Normal KarÅŸÄ±laÅŸtÄ±rma</h3>';
                const test1 = comparator.compare('Merhaba dÃ¼nya nasÄ±lsÄ±n', 'Merhaba dÃ¼nya nasÄ±lsÄ±n');
                html += `<p>Referans: "Merhaba dÃ¼nya nasÄ±lsÄ±n"</p>`;
                html += `<p>KullanÄ±cÄ±: "Merhaba dÃ¼nya nasÄ±lsÄ±n"</p>`;
                html += `<p>âœ“ DoÄŸru: ${test1.stats.correctCount}, âœ— YanlÄ±ÅŸ: ${test1.stats.incorrectCount}</p>`;

                // Test 2: Bir kelime atlandÄ±
                html += '<h3>Test 2: Bir Kelime AtlandÄ± (Ã–NEMLI!)</h3>';
                const test2 = comparator.compare('Merhaba dÃ¼nya nasÄ±lsÄ±n bugÃ¼n', 'Merhaba nasÄ±lsÄ±n bugÃ¼n');
                html += `<p>Referans: "Merhaba dÃ¼nya nasÄ±lsÄ±n bugÃ¼n"</p>`;
                html += `<p>KullanÄ±cÄ±: "Merhaba nasÄ±lsÄ±n bugÃ¼n" (dÃ¼nya atlandÄ±)</p>`;
                html += `<p>âœ“ DoÄŸru: ${test2.stats.correctCount}, âœ— YanlÄ±ÅŸ: ${test2.stats.incorrectCount}, âŠ˜ Eksik: ${test2.stats.missingCount}</p>`;
                html += `<p style="color: green;">Beklenen: 3 doÄŸru, 0 yanlÄ±ÅŸ, 1 eksik</p>`;

                // Test 3: Bir kelime yanlÄ±ÅŸ yazÄ±ldÄ±
                html += '<h3>Test 3: Bir Kelime YanlÄ±ÅŸ YazÄ±ldÄ±</h3>';
                const test3 = comparator.compare('Merhaba dÃ¼nya nasÄ±lsÄ±n', 'Merhaba dunya nasÄ±lsÄ±n');
                html += `<p>Referans: "Merhaba dÃ¼nya nasÄ±lsÄ±n"</p>`;
                html += `<p>KullanÄ±cÄ±: "Merhaba dunya nasÄ±lsÄ±n" (dÃ¼nya â†’ dunya)</p>`;
                html += `<p>âœ“ DoÄŸru: ${test3.stats.correctCount}, âœ— YanlÄ±ÅŸ: ${test3.stats.incorrectCount}</p>`;

                // Test 4: Fazladan kelime eklendi
                html += '<h3>Test 4: Fazladan Kelime Eklendi</h3>';
                const test4 = comparator.compare('Merhaba dÃ¼nya', 'Merhaba Ã§ok gÃ¼zel dÃ¼nya');
                html += `<p>Referans: "Merhaba dÃ¼nya"</p>`;
                html += `<p>KullanÄ±cÄ±: "Merhaba Ã§ok gÃ¼zel dÃ¼nya" (Ã§ok gÃ¼zel fazladan)</p>`;
                html += `<p>âœ“ DoÄŸru: ${test4.stats.correctCount}, + Fazla: ${test4.stats.extraCount}</p>`;

                // Test 5: KarmaÅŸÄ±k senaryo
                html += '<h3>Test 5: KarmaÅŸÄ±k Senaryo</h3>';
                const test5 = comparator.compare(
                    'Bu bir test cÃ¼mlesidir ve Ã§ok Ã¶nemlidir',
                    'Bu test cÃ¼mlesidir ve Ã¶nemlidir'
                );
                html += `<p>Referans: "Bu bir test cÃ¼mlesidir ve Ã§ok Ã¶nemlidir"</p>`;
                html += `<p>KullanÄ±cÄ±: "Bu test cÃ¼mlesidir ve Ã¶nemlidir" (bir ve Ã§ok atlandÄ±)</p>`;
                html += `<p>âœ“ DoÄŸru: ${test5.stats.correctCount}, âŠ˜ Eksik: ${test5.stats.missingCount}</p>`;
                html += `<p style="color: green;">Beklenen: 5 doÄŸru, 2 eksik</p>`;

                output.innerHTML = html;
            } catch (error) {
                output.innerHTML = `<div class="test-result error">âœ— Hata: ${error.message}</div><pre>${error.stack}</pre>`;
            }
        }

        function testTimer() {
            const output = document.getElementById('timer-test');
            
            try {
                const timer = new Timer(10);
                let html = '<div class="test-result success">âœ“ Timer oluÅŸturuldu (10 saniye)</div>';
                html += `<p>Formatted: ${timer.getFormattedTime()}</p>`;
                
                timer.setCallbacks({
                    onTick: (remaining) => {
                        document.getElementById('timer-test').querySelector('p').textContent = 
                            `Kalan: ${timer.getFormattedTime()}`;
                    },
                    onComplete: () => {
                        document.getElementById('timer-test').innerHTML += 
                            '<div class="test-result success">âœ“ Timer tamamlandÄ±!</div>';
                    }
                });
                
                timer.start();
                html += '<p>Timer baÅŸlatÄ±ldÄ±...</p>';
                
                output.innerHTML = html;
            } catch (error) {
                output.innerHTML = `<div class="test-result error">âœ— Hata: ${error.message}</div>`;
            }
        }

        function testPool() {
            const output = document.getElementById('pool-test');
            
            try {
                // Havuzu temizle
                MistakePool.clear();
                
                // Test verileri ekle
                MistakePool.addMistakes([
                    { typed: 'merhaba', correct: 'merhaba' },
                    { typed: 'dunya', correct: 'dÃ¼nya' },
                    { typed: 'test', correct: 'test' }
                ]);
                
                const stats = MistakePool.getStats();
                const words = MistakePool.getAllWords();
                
                let html = '<div class="test-result success">âœ“ MistakePool Ã§alÄ±ÅŸÄ±yor</div>';
                html += `<p>Toplam kelime: ${stats.totalWords}</p>`;
                html += `<p>Kelimeler: ${words.join(', ')}</p>`;
                
                output.innerHTML = html;
            } catch (error) {
                output.innerHTML = `<div class="test-result error">âœ— Hata: ${error.message}</div>`;
            }
        }

        // Sayfa yÃ¼klendiÄŸinde otomatik test
        window.addEventListener('load', () => {
            testFiles();
        });
    </script>
</body>
</html>

